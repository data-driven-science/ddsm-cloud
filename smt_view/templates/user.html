{% extends "base.html" %}

{% block headlinks %}

<link rel="stylesheet" type="text/css" href="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.css">

{% endblock %}

{% block navbarright %}
<div id="navbar" class="navbar-collapse collapse">
  <ul class="nav navbar-nav navbar-right">
    <li><a href="#">Settings</a></li>
  </ul>
  <form class="navbar-form navbar-right">
    <input type="text" class="form-control" placeholder="Search...">
  </form>
</div>
{% endblock %}

{% block content %}

<div class="container-fluid">

  <div class="row">
    <div class="col-sm-3 col-md-2 sidebar">
      <ul class="nav nav-sidebar">
        <li class="active"><a href="#">Projects for {{ user.email }}<span class="sr-only">(current)</span></a></li>
      </ul>
    </div>

    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
      <h1 class="Records"></h1>
      <div class="table-responsive">

        <table class="table table-striped" id="projects">
          <!-- <thead> -->
          <!--   <tr> -->
          <!--     <th>Name</th> -->
          <!--     <th>User</th> -->
          <!--     <th>Number of Records</th> -->
          <!--   </tr> -->
          <!-- </thead> -->
          <!-- <\!-- <tbody> -\-> -->
          <!-- <\!-- </tbody> -\-> -->
        </table>

      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block javascript %}
<script type="text/javascript" language="javascript" src="http://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language="javascript" src="http://cdn.datatables.net/plug-ins/3cfcc339e89/integration/bootstrap/3/dataTables.bootstrap.js"></script>

<script>
  var dataset = {{ table_json|safe }};

  $(function(){
    $("#projects").dataTable({
      "data" : dataset,
      "columns" : [{"title" : "Name", "targets" : 0, "render" :
                     function ( data, type, row ) {
                       return '<a href='+row[4]+'>'+data+'</a>';
                     }
                   },
                   {"title" : "User", "targets" : 1},
                   {"title" : "Number of Records", "targets" : 2},
                   {"title" : "Created", "targets" : 3}]
    });
  });
</script>
<!-- <script type="text/javascript" charset="utf-8"> -->
<!--   $(document).ready(function() { -->
<!--   $('#projects').dataTable(); -->
<!--   } ); -->
<!-- </script> -->
{% endblock %}
